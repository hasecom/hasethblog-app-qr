(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3080:function(e,t,n){Promise.resolve().then(n.bind(n,1258))},1258:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var l=n(7437),r=n(6621),s=n(9933),i=()=>(0,l.jsx)(r.k,{as:"header",align:"center",justify:"space-between",p:4,bg:"blue.500",color:"white",children:(0,l.jsx)(s.X,{fontSize:"xl",children:"Amazon商品QRコードメーカー"})}),a=n(2265),c=n(3621),u=n(1504),o=n(9791);let d=(0,a.createContext)(null);var x=e=>{let{number:t}=e,[n,s]=(0,a.useState)(""),i=(0,a.useContext)(d),c=async()=>{if(!navigator.clipboard){alert("ペースト機能が、お使いの環境に対応していないか、クリップボードにコピーされていません。");return}navigator.clipboard.readText().then(e=>{s(e)}).catch(e=>{alert("ペースト機能を使うには、ブラウザの許可設定が必要です。")})};return(0,l.jsxs)(r.k,{justifyContent:"space-between",alignItems:"center",p:2,children:[(0,l.jsx)(o.I,{flex:"1",mr:2,type:"text",placeholder:"Amazonの商品リンクを入力【 ".concat(t+1," 】"),_placeholder:{fontSize:"0.75rem"},value:n,onChange:e=>{s(e.target.value),null===n?null==i||i.removeItemByIndex(t):null==i||i.changeMakeList(e.target.value,t)}}),(0,l.jsx)(u.z,{size:"sm",onClick:c,children:"ペースト"})]})},h=()=>{let[e,t]=(0,a.useState)(1),{divHeight:n,divRef:s}=j(e);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(c.xu,{mx:["10%","20%","30%"],width:["90%","70%"],margin:"auto",children:[(0,l.jsx)(c.xu,{overflow:3<e?"scroll":"auto",ref:s,height:n,children:Array.from({length:e},(e,t)=>(0,l.jsx)(x,{number:t},t))}),(0,l.jsx)(r.k,{justifyContent:"flex-end",mt:2,py:2,children:(0,l.jsx)(u.z,{colorScheme:"blue",variant:"outline",size:"sm",ml:"auto",py:2,px:2,onClick:()=>{if(10<=e){alert("最大10個までしか追加できません。");return}t(e+1)},children:"リンクを追加する"})})]})})};let j=e=>{let t=(0,a.useRef)(null),[n,l]=(0,a.useState)("auto");return(0,a.useEffect)(()=>{3<e?t&&t.current&&(l(t.current.clientHeight+"px"),t.current.scrollTop=t.current.scrollHeight):l("auto")},[e]),{divHeight:n,divRef:t}};var m=n(9126),p=n(2395);let g=e=>"https://www.amazon.co.jp/dp/".concat(e,"/ref=nosim?tag=").concat("test");var f=e=>{let{value:t,size:n}=e,r=g(t);return(0,l.jsx)("div",{children:(0,l.jsx)(p.ZP,{value:r,size:n||128})})},v=e=>{let{list:t}=e,n=(0,a.useContext)(d);return(0,l.jsx)(c.xu,{p:2,children:(0,l.jsxs)(r.k,{align:"center",children:[(0,l.jsx)(c.xu,{mr:2,children:(0,l.jsx)(f,{value:t.asin,size:null==n?void 0:n.settingList.qr.size})}),(0,l.jsxs)(c.xu,{children:[(null==n?void 0:n.settingList.title.display)&&(0,l.jsx)(m.x,{fontSize:"xl",children:"あああ"}),(null==n?void 0:n.settingList.price.display)&&(0,l.jsx)(m.x,{fontSize:"sm",color:"gray.500",children:"500円"})]})]})})},b=()=>{let e=(0,a.useContext)(d);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.xu,{mx:["10%","20%","30%"],width:["90%","70%"],margin:"auto",children:(0,l.jsxs)(c.xu,{position:"relative",children:[(0,l.jsx)(c.xu,{border:"2px solid #add8e6",borderRadius:"8px",overflow:"hidden",position:"relative",ref:null==e?void 0:e.html2canvasElementRef,children:((null==e?void 0:e.makeList)||[]).filter(e=>""!==e.asin).map((e,t)=>(0,l.jsx)(v,{list:e},t))}),(0,l.jsx)(c.xu,{position:"absolute",top:"0",left:"0",background:"#add8e6",padding:"4px",borderRadius:"4px 0 0 0",children:(0,l.jsx)(m.x,{color:"white",children:"Preview"})})]})})})},z=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(b,{})}),y=()=>{let[e,t]=(0,a.useState)({title:{fontColor:"blue",fontSize:"20px",display:!0},price:{display:!0},qr:{size:128}});return{settingList:e,updateSettingList:e=>{t(e)}}},C=n(2692),w=n.n(C),S=()=>{let e=(0,a.useRef)(null),[t,n]=(0,a.useState)(""),l=async()=>{let t=e.current;if(!t){console.error("Target element not found");return}try{let e=await w()(t),l=e.toDataURL();n(l)}catch(e){console.error("Error capturing element:",e)}};return[l,e,t]},k=e=>{let{children:t}=e,[n,r]=(0,a.useState)(null),{settingList:s,updateSettingList:i}=y(),[c,u,o]=S();return(0,l.jsx)(d.Provider,{value:{makeList:n,changeMakeList:(e,t)=>{let n={asin:e,number:t};r(e=>{if(!e)return[n];let l=[...e],r=e.findIndex(e=>e.number===t);return -1!==r?l[r]=n:l.push(n),l})},removeItemByIndex:e=>{r(t=>{if(!t)return t;let n=[...t];return n.splice(e,1),n})},settingList:s,updateSettingList:i,captureElement:c,html2canvasElementRef:u,resultImage:o},children:t})},L=n(8402),E=n(954),I=n(6526),_=n(501),R=n(3391),q=n(1629),F=n(4159),Y=n(8610),A=n(6691),N=n.n(A),O=n(8613),P=()=>{let e=(0,a.useContext)(d),{isOpen:t,onOpen:n,onClose:r}=(0,L.q)();(0,a.useEffect)(()=>{(null==e?void 0:e.resultImage)&&n()},[null==e?void 0:e.resultImage,n]);let s=async()=>{if(null==e?void 0:e.resultImage){let t=await e.resultImage,n=atob(t.split(",")[1]),l=new Uint8Array(n.length);for(let e=0;e<n.length;e++)l[e]=n.charCodeAt(e);let r=new Blob([l],{type:"image/png"});(0,O.saveAs)(r,"fkorw.png")}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(E.u_,{isOpen:t,onClose:r,children:[(0,l.jsx)(I.Z,{}),(0,l.jsxs)(_.h,{children:[(0,l.jsx)(R.x,{children:"生成完了"}),(0,l.jsx)(q.o,{}),(0,l.jsx)(F.f,{children:(null==e?void 0:e.resultImage)?(0,l.jsx)(N(),{src:null==e?void 0:e.resultImage,alt:"Captured Image",width:500,height:300}):(0,l.jsx)("p",{children:"No image available"})}),(0,l.jsxs)(Y.m,{children:[(0,l.jsx)(u.z,{colorScheme:"blue",mr:3,onClick:r,children:"閉じる"}),(0,l.jsx)(u.z,{variant:"ghost",onClick:s,children:"画像を保存"})]})]})]})})},X=n(1469),B=n(2830),K=n(8986);let T=()=>{let e=(0,a.useContext)(d),t=!e||e.settingList.title.display?"0":"1",[n,r]=(0,a.useState)(t),i=()=>{null==e||e.updateSettingList({...null==e?void 0:e.settingList,title:{...null==e?void 0:e.settingList.title,display:"0"==n}})};return(0,a.useEffect)(()=>{i()},[n]),(0,l.jsxs)(c.xu,{pt:4,children:[(0,l.jsx)(s.X,{as:"h2",size:"sm",mb:2,children:"商品名表示"}),(0,l.jsx)(X.E,{onChange:r,value:n,children:(0,l.jsxs)(B.K,{direction:"row",children:[(0,l.jsx)(K.Y,{value:"0",children:"表示"}),(0,l.jsx)(K.Y,{value:"1",children:"非表示"})]})})]})},Z=()=>{let e=(0,a.useContext)(d),t=!e||e.settingList.price.display?"0":"1",[n,r]=(0,a.useState)(t),i=()=>{null==e||e.updateSettingList({...null==e?void 0:e.settingList,price:{...null==e?void 0:e.settingList.price,display:"0"==n}})};return(0,a.useEffect)(()=>{i()},[n]),(0,l.jsxs)(c.xu,{pt:4,children:[(0,l.jsx)(s.X,{as:"h2",size:"sm",mb:2,children:"価格表示"}),(0,l.jsx)(X.E,{onChange:r,value:n,children:(0,l.jsxs)(B.K,{direction:"row",children:[(0,l.jsx)(K.Y,{value:"0",children:"表示"}),(0,l.jsx)(K.Y,{value:"1",children:"非表示"})]})})]})},H=()=>{let e=(0,a.useContext)(d),t=e?e.settingList.qr.size:128,[n,r]=(0,a.useState)(t.toString()),i=()=>{null==e||e.updateSettingList({...null==e?void 0:e.settingList,qr:{...null==e?void 0:e.settingList.qr,size:parseInt(n,10)}})};return(0,a.useEffect)(()=>{i()},[n]),(0,l.jsxs)(c.xu,{pt:4,children:[(0,l.jsx)(s.X,{as:"h2",size:"sm",mb:2,children:"QRコードサイズ"}),(0,l.jsx)(X.E,{onChange:r,value:n,children:(0,l.jsxs)(B.K,{direction:"row",children:[(0,l.jsx)(K.Y,{value:"64",children:"小"}),(0,l.jsx)(K.Y,{value:"128",children:"中"}),(0,l.jsx)(K.Y,{value:"256",children:"大"})]})})]})};var M=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T,{}),(0,l.jsx)(Z,{}),(0,l.jsx)(H,{})]}),Q=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,L.q)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.z,{colorScheme:"blue",size:"md",mx:2,onClick:t,children:"詳細設定"}),(0,l.jsxs)(E.u_,{isOpen:e,onClose:n,children:[(0,l.jsx)(I.Z,{}),(0,l.jsxs)(_.h,{children:[(0,l.jsx)(R.x,{children:"詳細設定"}),(0,l.jsx)(q.o,{}),(0,l.jsx)(F.f,{children:(0,l.jsx)(M,{})}),(0,l.jsx)(Y.m,{children:(0,l.jsx)(u.z,{colorScheme:"blue",mr:3,onClick:n,children:"閉じる"})})]})]})]})},U=()=>{let e=(0,a.useContext)(d),t=async()=>{(null==e?void 0:e.captureElement)instanceof Function?await e.captureElement():console.error("captureElement is not a function")};return(0,l.jsxs)(r.k,{position:"fixed",bottom:0,left:0,right:0,p:4,bg:"gray.200",justify:"center",align:"center",children:[(0,l.jsx)(u.z,{colorScheme:"gray",size:"md",mx:2,children:"使い方"}),(0,l.jsx)(Q,{}),(0,l.jsx)(u.z,{colorScheme:"blue",size:"md",mx:2,onClick:t,children:"作成する"})]})},D=()=>(0,l.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between p-24",children:[(0,l.jsx)(i,{}),(0,l.jsxs)(k,{children:[(0,l.jsx)(h,{}),(0,l.jsx)(z,{}),(0,l.jsx)(P,{}),(0,l.jsx)(U,{})]})]})}},function(e){e.O(0,[337,268,301,971,472,744],function(){return e(e.s=3080)}),_N_E=e.O()}]);